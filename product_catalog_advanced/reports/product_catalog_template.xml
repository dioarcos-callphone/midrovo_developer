<?xml version='1.0' encoding='utf-8'?>
<odoo>
    <template id="product_catalog_template">
        <t t-call="web.html_container">
            <t t-call="web.external_layout">
                <div class="page">
                    <header style="margin: 0 !important; padding-bottom: 5px !important; text-align: center;">
                        <div>
                            <h3>
                                Catálogo de Productos
                            </h3>
                        </div>
                    </header>
                </div>
                <t t-name="product_catalog_advanced.product_catalog_template">
                    <t t-foreach="options" t-as="producto">
                        <div class="product" style="margin: 10px 0; padding: 10px 0;">
                            <!-- Nombre del producto -->
                            <h4 style="padding: 10px 0;"><t t-esc="producto['name']"/></h4>
                            
                            <!-- Colores -->
                            <t t-foreach="producto['colores']" t-as="color">
                                <div class="color-section">
                                    <!-- Imagen del color (flotando a la izquierda) -->
                                    <t t-if="color['image']">
                                        <img t-att-src="'data:image/png;base64,' + color['image']" 
                                            alt="Imagen del producto" 
                                            class="o_image_64_contain" 
                                            style="max-width: 150px; max-height: 150px; float: left; margin-right: 20px;"/>
                                    </t>
                                    <t t-else="">
                                        <!-- Mostrar imagen por defecto si no hay imagen (flotando a la izquierda) -->
                                        <img src="/product_catalog_advanced/static/src/img/placeholder.png" 
                                            alt="Imagen no disponible" 
                                            class="o_image_64_contain" 
                                            style="max-width: 150px; max-height: 150px; float: left; margin-right: 20px;"/>
                                    </t>

                                    <!-- Tabla de tallas (flotando a la derecha de la imagen) -->
                                    <table style="border-collapse: collapse; border: 1px solid blue; width: auto;">
                                        <thead>
                                            <tr>
                                                <t t-foreach="color['tallas']" t-as="talla">
                                                    <th style="border: 1px solid blue; padding: 5px;">
                                                        <t t-esc="talla['talla']"/>
                                                    </th>
                                                </t>
                                                <th style="border: 1px solid blue; padding: 5px;">Cantidad</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <t t-foreach="color['tallas']" t-as="talla">
                                                    <td style="border: 1px solid blue; padding: 5px; text-align: center;">
                                                        <t t-esc="talla['cantidad']"/>
                                                    </td>
                                                </t>
                                                <td style="border: 1px solid blue; padding: 5px; text-align: center;">
                                                    <t t-esc="sum([talla['cantidad'] for talla in color['tallas']])"/>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    
                                    <!-- Limpiar flotación -->
                                    <div style="clear: both;"></div>
                                </div>
                            </t>
                        </div>
                    </t>
                </t>
            </t>
        </t>
    </template>
</odoo>
