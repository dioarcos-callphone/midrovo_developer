<?xml version='1.0' encoding='utf-8'?>
<odoo>
    <template id="product_catalog_template">
        <t t-call="web.html_container">
            <t t-call="web.external_layout">
                <div class="page">
                    <header style="margin: 0 !important; padding-bottom: 5px !important; text-align: center;">
                        <div>
                            <h3>
                                Cat√°logo de Productos
                            </h3>
                        </div>
                    </header>
                </div>
                <t t-name="product_catalog_advanced.product_catalog_template">
                    <t t-foreach="options" t-as="producto">
                        <div class="product" style="margin: 10px 0; padding: 10px 0;">
                            <!-- Nombre del producto -->
                            <h4 style="padding: 10px 0;"><t t-esc="producto['name']"/></h4>
                            
                            <!-- Colores -->
                            <t t-foreach="producto['colores']" t-as="color">
                                <div class="color-section">
                                    <!-- Imagen del color (solo si existe) -->
                                    <t t-if="color['image']">
                                        <img t-att-src="'data:image/png;base64,' + color['image']" 
                                            alt="Imagen del producto" 
                                            class="o_image_64_contain" 
                                            style="max-width: 150px; max-height: 150px;"/>
                                    </t>
                                    <t t-else="">
                                        <!-- Mostrar imagen por defecto si no hay imagen -->
                                        <img src="/product_catalog_advanced/static/src/img/placeholder.png" 
                                            alt="Imagen no disponible" 
                                            class="o_image_64_contain" 
                                            style="max-width: 150px; max-height: 150px;"/>
                                    </t>

                                    <!-- Nombre del color -->
                                    <p>Color: <t t-esc="color['color']"/></p>

                                    <!-- Tallas en tabla -->
                                    <table style="border-collapse: collapse; width: 100%; margin-top: 10px;">
                                        <thead>
                                            <tr>
                                                <th style="border: 1px solid #2196f3; padding: 8px; background-color: #f2f2f2;">Talla</th>
                                                <th style="border: 1px solid #2196f3; padding: 8px; background-color: #f2f2f2;">Cantidad</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <t t-foreach="color['tallas']" t-as="talla">
                                                <tr>
                                                    <td style="border: 1px solid #2196f3; padding: 8px;">
                                                        <t t-esc="talla['talla']"/>
                                                    </td>
                                                    <td style="border: 1px solid #2196f3; padding: 8px;">
                                                        <t t-esc="talla['cantidad']"/>
                                                    </td>
                                                </tr>
                                            </t>
                                        </tbody>
                                    </table>
                                </div>
                            </t>
                        </div>
                    </t>
                </t>
            </t>
        </t>
    </template>
</odoo>
