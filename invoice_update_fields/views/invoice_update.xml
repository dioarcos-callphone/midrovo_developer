<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_invoice_additional_info" inherit_id="l10n_ec_edi.report_invoice_additional_info">
        <xpath expr="//tbody" position="replace">
            <tbody>
                <t t-foreach="additional_info.items()" t-as="item">
                    <tr>
                        <td>
                            <t t-if="item[0] != 'E-mail'">
                                <span t-esc="str(item[0])"/>
                            </t>
                            <t t-if="item[0] != 'Vendedor' and item[0] != 'Referencia' and o.commercial_partner_id">
                                <t t-set="partner" t-value="env['res.partner'].search([('id', '=', o.commercial_partner_id.id)], limit=1)"/>
                                <t t-if="partner">
                                    <t t-if="partner.email_normalized">
                                        <span>E-mail del cliente</span>
                                    </t>
                                </t>
                            </t>
                        </td>
                        <td>
                            <t t-if="item[0] == 'Vendedor'">
                                <span>
                                    <t t-if="o.invoice_origin">
                                        <t t-set="order" t-value="env['pos.order'].search([('name', '=', o.invoice_origin)], limit=1)"/>
                                        <t t-if="order">
                                            <t t-esc="order.cashier"/>
                                        </t>
                                        <t t-else="">
                                            <t t-esc="str(item[1])"></t>
                                        </t>
                                    </t>
                                </span>
                            </t>
                            <t t-if="item[0] != 'Vendedor' and item[0] != 'Referencia' and o.commercial_partner_id">
                                <span>
                                    <t t-set="partner" t-value="env['res.partner'].search([('id', '=', o.commercial_partner_id.id)], limit=1)"/>
                                    <t t-if="partner">
                                        <t t-if="partner.email_normalized">
                                            <t t-esc="partner.email_normalized"/>
                                        </t>
                                    </t>
                                </span>
                            </t>                            
                            <t t-if="item[0] != 'Vendedor'">
                                <span t-esc="str(item[1])"/>
                            </t>
                        </td>
                    </tr>
                </t>
            </tbody>
        </xpath>
    </template>

    <template id="report_invoice_note" inherit_id="account.report_invoice_document">
        <xpath expr="//div[@t-if='not is_html_empty(o.narration)']" position="replace">
            <t t-if="'http' not in o.narration">
                <span style="font-weight: bold;">Nota:</span>
                <t t-esc="o.narration"/>
            </t>
        </xpath>
    </template>
</odoo>