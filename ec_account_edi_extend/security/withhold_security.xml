<data noupdate="1">

    <record id="base.group_portal" model="res.groups">
        <field name="implied_ids" eval="[(4, ref('account.group_show_line_subtotals_tax_excluded'))]"/>
    </record>

    <!-- Portal for withholds -->
    <record id="account_withhold_rule_portal" model="ir.rule">
        <field name="name">Portal Personal Account Withholds</field>
        <field name="model_id" ref="ec_account_edi_extend.model_account_withhold"/>
        <field name="domain_force">[('state', 'not in', ('canceled', 'draft')), ('message_partner_ids','child_of',[user.commercial_partner_id.id])]</field>
        <field name="groups" eval="[(4, ref('base.group_portal'))]"/>
    </record>

    <record id="account_withhold_line_rule_portal" model="ir.rule">
        <field name="name">Portal Withhold Lines</field>
        <field name="model_id" ref="ec_account_edi_extend.model_account_withhold_line"/>
        <field name="domain_force">[('retention_id.state', 'not in', ('canceled', 'draft')), ('retention_id.message_partner_ids','child_of',[user.commercial_partner_id.id])]</field>
        <field name="groups" eval="[(4, ref('base.group_portal'))]"/>
    </record>

    <record id="tax_comp_rule" model="ir.rule">
        <field name="name">Tax multi-company</field>
        <field name="model_id" ref="account.model_account_tax"/>
        <field name="domain_force">['|',('company_id','=',False),('company_id', 'in', company_ids)]</field>
    </record>

    <record id="group_show_retention_documents" model="res.groups">
        <field name="name">Retention Documents Display</field>
        <field name="comment">Allow users to view their own retention documents</field>
        <field name="category_id" ref="base.module_category_hidden"/>
    </record>

    <record id="base.group_portal" model="res.groups">
        <field name="implied_ids" eval="[(4, ref('ec_account_edi_extend.group_show_retention_documents'))]"/>
    </record>
    
    <record id="retention_comp_rule" model="ir.rule">
        <field name="name">Retention multi-company</field>
        <field name="model_id" ref="account.model_account_tax"/> <!-- Reemplaza con el modelo correcto -->
        <field name="domain_force">[('create_uid', '=', user.id)]</field> <!-- Acceso solo a documentos creados por el usuario -->
        <field name="groups" eval="[(4, ref('ec_account_edi_extend.group_show_retention_documents'))]"/>
    </record>

</data>
